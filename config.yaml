# Financial RAG System Configuration
# Environment-specific configuration (development, testing, staging, production)

# Application settings
app_name: "Financial RAG System"
app_version: "1.0.0"
environment: "development"

# Database Configuration
database:
  host: "localhost"
  port: 3306
  database: "financial_rag"
  username: "root"
  password: "password"
  driver: "mysql"
  charset: "utf8mb4"
  pool_size: 10
  max_overflow: 20
  pool_timeout: 30
  pool_recycle: 3600
  ssl_mode: "preferred"

# Cache Configuration
cache:
  redis_host: "localhost"
  redis_port: 6379
  redis_db: 0
  redis_password: null
  redis_ssl: false
  default_ttl: 3600
  max_connections: 100
  socket_timeout: 5
  memory_cache_size: 1000
  memory_cache_ttl: 300

# LLM Configuration
llm:
  openai_api_key: null  # Set via environment variable OPENAI_API_KEY
  openai_base_url: null
  openai_model: "gpt-3.5-turbo"
  openai_max_tokens: 4096
  openai_temperature: 0.7

  anthropic_api_key: null  # Set via environment variable ANTHROPIC_API_KEY
  anthropic_model: "claude-3-sonnet-20240229"
  anthropic_max_tokens: 4096

  local_llm_url: null
  local_llm_model: null

  request_timeout: 60
  max_retries: 3
  retry_delay: 1.0

# Embedding Configuration - 使用Qwen2.5-VL-Embedding
embeddings:
  qwen_api_key: "sk-5233a3a4b1a24426b6846a432794bbe2"
  qwen_base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
  qwen_primary_model: "qwen2.5-vl-embedding"
  qwen_backup_model: "text-embedding-v4"
  qwen_reranker_model: "qwen3-rerank"

  openai_api_key: null  # Set via environment variable OPENAI_API_KEY
  openai_model: "text-embedding-ada-002"

  local_embedding_model: "sentence-transformers/all-MiniLM-L6-v2"
  local_embedding_url: null

  batch_size: 32
  dimension: 1024  # Qwen2.5-VL-Embedding的维度
  normalize: true

# Vector Database Configuration
vectordb:
  milvus_host: "localhost"
  milvus_port: 19530
  milvus_collection: "documents"
  milvus_dimension: 1024  # Qwen2.5-VL-Embedding的维度
  milvus_index_type: "IVF_FLAT"
  milvus_metric_type: "IP"

  search_limit: 10
  search_threshold: 0.7

# Knowledge Graph Configuration
knowledge_graph:
  neo4j_uri: "bolt://localhost:7687"
  neo4j_user: "neo4j"
  neo4j_password: "password"
  neo4j_database: "neo4j"

  enable_entity_extraction: true
  entity_confidence_threshold: 0.5
  max_entities_per_document: 100

# Storage Configuration
storage:
  minio_endpoint: "localhost:9000"
  minio_access_key: "minioadmin"
  minio_secret_key: "minioadmin"
  minio_bucket: "documents"
  minio_region: "us-east-1"
  minio_secure: false

  max_file_size: 104857600  # 100MB
  allowed_extensions:
    - ".pdf"
    - ".docx"
    - ".xlsx"
    - ".pptx"
    - ".txt"
    - ".md"
  upload_path: "/tmp/uploads"

# Security Configuration
security:
  jwt_secret_key: "your-super-secret-jwt-key-change-in-production"
  jwt_algorithm: "HS256"
  jwt_access_token_expire_minutes: 30
  jwt_refresh_token_expire_days: 7

  password_min_length: 8
  password_require_uppercase: true
  password_require_lowercase: true
  password_require_numbers: true
  password_require_symbols: false

  rate_limit_enabled: true
  rate_limit_requests_per_minute: 60
  rate_limit_requests_per_hour: 1000

  cors_origins:
    - "*"
  cors_methods:
    - "*"
  cors_headers:
    - "*"

# Logging Configuration
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  log_file: null
  max_file_size: 10485760  # 10MB
  backup_count: 5
  console_logging: true
  structured_logging: false
  enable_performance_logging: true
  slow_query_threshold: 1.0

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  debug: false
  api_title: "Financial RAG API"
  api_description: "Financial Document RAG System API"
  api_version: "1.0.0"
  max_request_size: 10485760  # 10MB
  request_timeout: 300
  default_page_size: 20
  max_page_size: 100

# Task Queue Configuration
task_queue:
  broker_url: "redis://localhost:6379/1"
  result_backend: "redis://localhost:6379/2"
  worker_concurrency: 4
  worker_prefetch_multiplier: 1
  task_track_started: true
  task_serializer: "json"
  result_serializer: "json"
  queue_default: "default"
  task_routes: {}

# Monitoring Configuration
monitoring:
  enable_metrics: true
  metrics_port: 9090
  health_check_enabled: true
  health_check_interval: 30
  alert_webhook_url: null
  alert_email: null
  enable_tracing: false
  jaeger_endpoint: null